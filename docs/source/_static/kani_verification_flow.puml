@startuml kani_verification_flow
!theme plain
title KANI Verification Flow

skinparam activity {
    BackgroundColor LightYellow
    BorderColor DarkBlue
    FontSize 11
}

start

:Developer pushes code;

if (Is Pull Request?) then (yes)
    :Quick Verification\n(ASIL-A);
    :Run basic properties\n(3 unwind, MiniSAT);
else (no)
    if (Is Main Branch?) then (yes)
        :Comprehensive Verification\n(ASIL-C);
        :Run all 29 properties\n(5 unwind, CaDiCaL);
    else (scheduled)
        :Maximum Verification\n(ASIL-D);
        :Run with coverage\n(7 unwind, 8 workers);
    endif
endif

:Matrix Strategy\n4 packages Ã— 2-3 ASIL levels;

partition "Verification Execution" {
    :Load Kani.toml configuration;
    :Set unwind limits & solver;
    :Execute formal proofs;
    
    if (All proofs pass?) then (yes)
        :Generate verification report;
        :Update coverage metrics;
        :Create traceability evidence;
    else (no)
        :Generate failure report;
        :Extract counterexample;
        :Log detailed diagnostics;
        stop
    endif
}

:Upload artifacts;
:Comment on PR (if applicable);
:Update safety evidence;

stop

note right of "Quick Verification"
  Properties: 10-15
  Time: 2-5 minutes
  Use: Fast feedback
end note

note right of "Comprehensive Verification"
  Properties: 29
  Time: 15-30 minutes
  Use: Quality gate
end note

note right of "Maximum Verification"
  Properties: 29
  Time: 30-60 minutes
  Use: Safety evidence
end note

@enduml